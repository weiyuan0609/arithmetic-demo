<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>装饰者模式</title>
</head>
<body>

	<script type="text/javascript">
	/*
		装饰者提供比继承更有弹性的替代方案。 装饰者用用于包装同接口的对象，不仅允许你向方法添加行为，而且还可以将方法设置成原始对象调用（例如装饰者的构造函数）。

		装饰者用于通过重载方法的形式添加新功能，该模式可以在被装饰者前面或者后面加上自己的行为以达到特定的目的。
	*/
		var tree = {};
		tree.decorate = function () {
		    console.log('Make sure the tree won\'t fall');
		};

		tree.getDecorator = function (deco) {
		    tree[deco].prototype = this;
		    return new tree[deco];
		};

		tree.RedBalls = function () {
		    this.decorate = function () {
		        this.RedBalls.prototype.decorate();
		        console.log('Put on some red balls');
		    }
		};

		tree.BlueBalls = function () {
		    this.decorate = function () {
		        this.BlueBalls.prototype.decorate();
		        console.log('Add blue balls');
		    }
		};

		tree.Angel = function () {
		    this.decorate = function () {
		        this.Angel.prototype.decorate();
		        console.log('An angel on the top');
		    }
		};

		tree = tree.getDecorator('BlueBalls');
		tree = tree.getDecorator('Angel');
		tree = tree.getDecorator('RedBalls');

		tree.decorate();
	</script>
</body>
</html>